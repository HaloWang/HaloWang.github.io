<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç‹ç­–çš„åšå®¢</title>
  <subtitle>ä¸€ä¸ª iOS å¼€å‘è€…</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-07-21T09:32:08.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>WangCe</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å…³äºç¥ç»ç½‘ç»œ</title>
    <link href="http://yoursite.com/2016/07/06/Feed-Forward-Neural-Network/"/>
    <id>http://yoursite.com/2016/07/06/Feed-Forward-Neural-Network/</id>
    <published>2016-07-06T09:06:03.000Z</published>
    <updated>2016-07-21T09:32:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«ä¸€ä¸‹æˆ‘è¿‘æœŸå­¦ä¹ åˆ°çš„ç¥ç»ç½‘ç»œç›¸å…³<br>åŒæ—¶ï¼Œä½¿ç”¨ Swift å®ç°ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œå¹¶äºˆä»¥æµ‹è¯•</p>
<h2 id="ç¥ç»ç½‘ç»œ"><a href="#ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¥ç»ç½‘ç»œ"></a>ç¥ç»ç½‘ç»œ</h2><h3 id="ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ"><a href="#ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ"></a>ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ</h3><p>ä¸€èˆ¬æ„æ€ä¸Šçš„ç¥ç»ç½‘ç»œæŒ‡<strong>äººå·¥ç¥ç»ç½‘ç»œï¼ˆArtificial Neural Networkï¼‰</strong></p>
<p><a href="https://www.zhihu.com/question/22553761/answer/36429105" target="_blank" rel="external">å¦‚ä½•ç®€å•å½¢è±¡åˆæœ‰è¶£åœ°è®²è§£ç¥ç»ç½‘ç»œæ˜¯ä»€ä¹ˆï¼Ÿ</a><br><a href="https://www.quora.com/How-do-you-explain-Machine-Learning-and-Data-Mining-to-non-Computer-Science-people/answer/Pararth-Shah" target="_blank" rel="external">How do you explain Machine Learning and Data Mining to non Computer Science people?</a><br><a href="https://en.wikipedia.org/wiki/Artificial_neural_network" target="_blank" rel="external">wikipedia</a></p>
<h3 id="å¾ˆç›´è§‚çš„æ¼”ç¤º"><a href="#å¾ˆç›´è§‚çš„æ¼”ç¤º" class="headerlink" title="å¾ˆç›´è§‚çš„æ¼”ç¤º"></a>å¾ˆç›´è§‚çš„æ¼”ç¤º</h3><p><a href="http://playground.tensorflow.org/" target="_blank" rel="external">Tensorflow</a><br><a href="https://github.com/collinhundley/Swift-AI" target="_blank" rel="external">Swift-AI</a>ï¼ˆéœ€è¦æœ‰ Mac/Xcode ç¯å¢ƒï¼‰</p>
<h3 id="ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ ·å¼"><a href="#ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ ·å¼" class="headerlink" title="ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ ·å¼"></a>ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ ·å¼</h3><p><img src="/FFNN_images/ffnn.png" alt="FFNN"></p>
<h3 id="Feed-Forward-Neural-Network"><a href="#Feed-Forward-Neural-Network" class="headerlink" title="Feed Forward Neural Network"></a>Feed Forward Neural Network</h3><p>Feed Forward Neural Network ç®€ç§° FFNNï¼Œä¹Ÿå°±æ˜¯<strong>å‘å‰åé¦ˆç¥ç»ç½‘ç»œ</strong>æˆ–ç§°<strong>å‰é¦ˆç¥ç»ç½‘ç»œ</strong>ï¼Œæ˜¯ä¸€ç§æœ€ç®€å•ï¼Œæœ€åŸºç¡€çš„ç¥ç»ç½‘ç»œï¼ˆè¿™é‡Œå¤§å®¶ä¸ç”¨å¤ªåœ¨ä¹å‰é¦ˆè¿™ä¸ªè¯ï¼‰</p>
<h3 id="æˆ‘ç†è§£çš„ç¥ç»ç½‘ç»œ"><a href="#æˆ‘ç†è§£çš„ç¥ç»ç½‘ç»œ" class="headerlink" title="æˆ‘ç†è§£çš„ç¥ç»ç½‘ç»œ"></a>æˆ‘ç†è§£çš„ç¥ç»ç½‘ç»œ</h3><p>ç»™å®šè‹¥å¹²ä¸ªæ•°æ®ï¼ˆinputsï¼‰ï¼Œä»¥åŠæ¯ä¸ªæ•°æ®æ‰€ä»£è¡¨çš„æ„ä¹‰ï¼ˆanswersï¼‰ï¼Œå·²çŸ¥æ¯ä¸ªæ•°æ®çš„å€¼å’Œæ¯ä¸ªæ•°æ®ä»£è¡¨çš„æ„ä¹‰é—´æœ‰<strong>æŸç§å¤æ‚çš„ï¼ˆéš¾ä»¥ä½¿ç”¨ä¼ ç»Ÿæ•°å­¦æ–¹æ³•å¾—çŸ¥ï¼‰å‡½æ•°å…³ç³»</strong></p>
<p>ç°åœ¨æœ‰è¯¥ç±»ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FFNN</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">train</span><span class="params">(inputs:[Float], outputs:[Float])</span></span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">calculate</span><span class="params">(input:[Float])</span></span> -&gt; [<span class="type">Float</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ç°åœ¨ä½¿ç”¨è¶³å¤Ÿå¤šçš„ inputs å’Œå¯¹åº”çš„ answers ä¸æ–­è®­ç»ƒè¿™ä¸ª FFNNï¼Œå³åŒæ—¶å‘ŠçŸ¥è¾“å…¥å’Œè¾“å‡ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> ffnn = <span class="type">FFNN</span>()</div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="type">SAMPLE_DATAS</span> &#123;</div><div class="line">    ffnn.train(item.input, item.answer)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€æ¸çš„ï¼Œè¿™ä¸ª <code>ffnn</code> å°±å¯ä»¥<strong>å­¦ä¹ /æ¨¡ä»¿/ä¼°ç®—</strong>ï¼ˆæ›´å¤šæè¿°ä¸º<strong>æ‹Ÿåˆ</strong>ï¼‰åˆ°<strong>è‹¥å¹²ä¸ªæ•°æ®ï¼Œä»¥åŠæ¯ä¸ªæ•°æ®æ‰€ä»£è¡¨çš„æ„ä¹‰ä¸­éšå«çš„å‡½æ•°å…³ç³»</strong><br>å½“æˆ‘å……åˆ†è®­ç»ƒäº†è¿™ä¸ª <code>ffnn</code> å<br>é‚£ä¹ˆå‡è®¾ç°åœ¨æˆ‘æœ‰ä¸€ä¸ªæ•°æ®ï¼ˆinputï¼‰ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å®ƒæ‰€ä»£è¡¨çš„æ„ä¹‰ï¼ˆanswerï¼‰<br>ä½†æ˜¯ä¹‹å‰è®­ç»ƒè¿‡çš„ <code>ffnn</code> å·®ä¸å¤šèƒ½çŒœå‡ºæ¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> result = ffnn.calculate(input)</div><div class="line"></div><div class="line"><span class="keyword">if</span> result.diff(input.true_result) &lt; <span class="number">0.05</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"âœ… å…«ä¹ä¸ç¦»åï¼"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬è®­ç»ƒå®Œäº† <code>ffnn</code> åï¼Œç”¨ä¸€äº›å·²çŸ¥ç­”æ¡ˆçš„æ•°æ®åšæµ‹è¯•ï¼Œå‘ç° <code>ffnn</code> è®¡ç®—å‡ºæ¥çš„ç­”æ¡ˆå’ŒçœŸå®ç­”æ¡ˆçš„è¯¯å·®å·²ç»å¾ˆå°äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå¯¹ <code>ffnn</code> çš„è®­ç»ƒæˆåŠŸäº†ï¼Œæˆ–è€…è¯´ï¼Œ<code>ffnn.train</code> è¿™ä¸ªé»‘ç›’å­å·²ç»ã€çŒœé€ã€äº†æ•°æ®ä¸­<strong>æŸç§å¤æ‚çš„ï¼ˆéš¾ä»¥ä½¿ç”¨ä¼ ç»Ÿæ•°å­¦æ–¹æ³•å¾—çŸ¥ï¼‰å‡½æ•°å…³ç³»</strong></p>
<h2 id="ä½¿ç”¨-Swift-å®ç°ä¸€ä¸ª-FFNN"><a href="#ä½¿ç”¨-Swift-å®ç°ä¸€ä¸ª-FFNN" class="headerlink" title="ä½¿ç”¨ Swift å®ç°ä¸€ä¸ª FFNN"></a>ä½¿ç”¨ Swift å®ç°ä¸€ä¸ª FFNN</h2><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p><strong>é¦–å…ˆé™„ä¸Š<a href="https://github.com/HaloWang/SwiftFFNN" target="_blank" rel="external">å®Œæ•´é¡¹ç›®é“¾æ¥</a></strong></p>
<p>è¿™ä»½ä»£ç æå¤§ç¨‹åº¦ä¸Šå‚è€ƒäº†<a href="https://github.com/collinhundley/Swift-AI" target="_blank" rel="external">Swift-AI</a></p>
<p>ä¸‹é¢æˆ‘ä¼šå¯¹ä»£ç ä¸­çš„ä¸€äº›<strong>å…³é”®éƒ¨åˆ†</strong>åšä¸€ä¸‹è®²è§£</p>
<h4 id="æ•°æ®åˆå§‹åŒ–"><a href="#æ•°æ®åˆå§‹åŒ–" class="headerlink" title="æ•°æ®åˆå§‹åŒ–"></a>æ•°æ®åˆå§‹åŒ–</h4><p>åˆå§‹åŒ–è¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚ç¥ç»å…ƒçš„æ•°é‡ã€å±‚çº§ä¹‹é—´çš„æƒé‡ã€è®¡ç®—æ‰€éœ€çš„ç¼“å­˜</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FFNN</span> </span>&#123;</div><div class="line">    <span class="comment">//  è¾“å…¥å±‚ç¥ç»å…ƒæ•°é‡</span></div><div class="line">    <span class="keyword">let</span> inputCount: <span class="type">Int</span></div><div class="line">    <span class="comment">//  éšè—å±‚ç¥ç»å…ƒæ•°é‡</span></div><div class="line">    <span class="keyword">let</span> hiddenCount: <span class="type">Int</span></div><div class="line">    <span class="comment">//  è¾“å‡ºå±‚ç¥ç»å…ƒæ•°é‡</span></div><div class="line">    <span class="keyword">let</span> outputCount: <span class="type">Int</span></div><div class="line">    <span class="comment">//  è¾“å…¥å±‚ - éšè—å±‚æƒé‡</span></div><div class="line">    <span class="keyword">var</span> inputToHiddenWeight: [<span class="type">Float</span>]</div><div class="line">    <span class="comment">//  éšè—å±‚ - è¾“å‡ºå±‚æƒé‡</span></div><div class="line">    <span class="keyword">var</span> hiddenToOutputWeight: [<span class="type">Float</span>]</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ¿€åŠ±å‡½æ•°"><a href="#æ¿€åŠ±å‡½æ•°" class="headerlink" title="æ¿€åŠ±å‡½æ•°"></a>æ¿€åŠ±å‡½æ•°</h4><p>å…³äºæ¿€åŠ±å‡½æ•°çš„é€‰æ‹©ï¼Œå»ºè®®å¤§å®¶çœ‹çœ‹è¿™é‡Œï¼š<a href="https://www.zhihu.com/question/29021768/answer/43488153" target="_blank" rel="external">è¯·é—®äººå·¥ç¥ç»ç½‘ç»œä¸­çš„activation functionçš„ä½œç”¨å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆReLuè¦å¥½è¿‡äºtanhå’Œsigmoid function? - çŸ¥ä¹ç”¨æˆ·çš„å›ç­” - çŸ¥ä¹</a><br>æˆ‘åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨çš„æ˜¯ <code>sigmoid</code> å‡½æ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sigmoid</span><span class="params">(x: Float)</span></span> -&gt; <span class="type">Float</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + exp(-x))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ±‚è§£"><a href="#æ±‚è§£" class="headerlink" title="æ±‚è§£"></a>æ±‚è§£</h4><p>âš ï¸ å‡­ä»€ä¹ˆæ‹Ÿåˆï¼Ÿ</p>
<p><code>i</code> æ ¹æ® <code>inputToHiddenWeight</code> å’Œ <code>hiddenToOutputWeight</code> ä»¥åŠ <code>activation function</code> è®¡ç®—è¾“å‡ºçš„è¿‡ç¨‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(i: [Float])</span></span> -&gt; [<span class="type">Float</span>] &#123;</div><div class="line">    <span class="comment">//  ä¿è¯è¾“å…¥ = è¾“å…¥å±‚ç¥ç»å…ƒ</span></div><div class="line">    <span class="built_in">assert</span>(i.<span class="built_in">count</span> == inputCount)</div><div class="line">    <span class="comment">//  ä¸ºè¾“å…¥å±‚ç¥ç»å…ƒåŠ å…¥åç½®</span></div><div class="line">    inputCache = [<span class="number">1.0</span>] + i</div><div class="line">    <span class="comment">//  çŸ©é˜µç›¸ä¹˜</span></div><div class="line">    mul(<span class="type">A</span>: inputToHiddenWeight, <span class="type">B</span>: inputCache, <span class="type">C</span>: &amp;hiddenToOutputCache, <span class="type">M</span>: hiddenCount, <span class="type">N</span>: <span class="number">1</span>, <span class="type">P</span>: inputWithBiasCount)</div><div class="line">    <span class="comment">//  æ¿€åŠ±</span></div><div class="line">    hiddenToOutputCache = hiddenToOutputCache.<span class="built_in">map</span>(sigmoid)</div><div class="line">    <span class="comment">//  çŸ©é˜µç›¸ä¹˜</span></div><div class="line">    mul(<span class="type">A</span>: hiddenToOutputWeight, <span class="type">B</span>: hiddenToOutputCache, <span class="type">C</span>: &amp;outputCache, <span class="type">M</span>: outputCount, <span class="type">N</span>: <span class="number">1</span>, <span class="type">P</span>: hiddenWithBiasCount)</div><div class="line">    <span class="comment">//  æ¿€åŠ±</span></div><div class="line">    outputCache = outputCache.<span class="built_in">map</span>(sigmoid)</div><div class="line">    <span class="comment">//  è¿”å›ç»“æœ</span></div><div class="line">    <span class="keyword">return</span> outputCache</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="åå‘ä¼ æ’­"><a href="#åå‘ä¼ æ’­" class="headerlink" title="åå‘ä¼ æ’­"></a>åå‘ä¼ æ’­</h4><p>å…³äºå¦‚ä½•è®¡ç®—æƒå€¼ï¼Œéå¸¸æ¨èå¤§å®¶å…ˆçœ‹çœ‹è¿™ä¸ªé—®é¢˜ï¼š<a href="https://www.zhihu.com/question/27239198/answer/89853077" target="_blank" rel="external">å¦‚ä½•ç›´è§‚çš„è§£é‡Šback propagationç®—æ³•ï¼Ÿ - Evan Hoo çš„å›ç­” - çŸ¥ä¹</a></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘è®¤ä¸ºå¯¹æˆ‘ç†è§£ BP ç®—æ³•å¸®åŠ©æ¯”è¾ƒå¤§çš„è¯ï¼š</p>
<blockquote>
<ol>
<li>æœºå™¨å­¦ä¹ å¯ä»¥çœ‹åšæ˜¯æ•°ç†ç»Ÿè®¡çš„ä¸€ä¸ªåº”ç”¨ï¼Œåœ¨æ•°ç†ç»Ÿè®¡ä¸­ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡å°±æ˜¯æ‹Ÿåˆï¼Œä¹Ÿå°±æ˜¯ç»™å®šä¸€äº›æ ·æœ¬ç‚¹ï¼Œç”¨åˆé€‚çš„æ›²çº¿æ­ç¤ºè¿™äº›æ ·æœ¬ç‚¹éšç€è‡ªå˜é‡çš„å˜åŒ–å…³ç³»</li>
<li>é‡‡ç”¨æˆ‘ä»¬å¸¸ç”¨çš„æ¢¯åº¦ä¸‹é™æ³•å°±å¯ä»¥æœ‰æ•ˆçš„æ±‚è§£æœ€å°åŒ– cost å‡½æ•°çš„é—®é¢˜</li>
<li>BPç®—æ³•æ­£æ˜¯ç”¨æ¥æ±‚è§£è¿™ç§å¤šå±‚å¤åˆå‡½æ•°çš„æ‰€æœ‰å˜é‡çš„åå¯¼æ•°çš„åˆ©å™¨</li>
</ol>
</blockquote>
<p>ååˆ†æŠ±æ­‰ï¼Œè¿™é‡Œçš„ backpropagation å†™çš„ä¸å¤Ÿç®€æ´æ˜äº†ï¼Œæˆ‘å°±ä¸å¤šè®²äº†ï¼Œä»…ä»…è¯´æ˜ä¸€ä¸‹è¿™ä¸ª <code>function</code> è°ƒç”¨åï¼Œå¯¹ <code>FFNN. inputToHiddenWeight</code> å’Œ <code>FFNN. hiddenToOutputWeight</code> çš„å½±å“å§</p>
<ul>
<li>åœ¨ <code>update</code> åè°ƒç”¨</li>
<li>ä¿®æ”¹ <code>weight</code></li>
<li>é€šè¿‡è°ƒæ•´å„ä¸ªç¥ç»å…ƒé“¾æ¥é—´çš„ weight ï¼Œæ˜¯æ‹Ÿåˆå‡ºæ¥å’Œå‡½æ•°è¶Šæ¥è¶Šæ¥è¿‘ç›®æ ‡å‡½æ•°</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">backpropagation</span><span class="params">(answer: [Float])</span></span> &#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p><font color="#999999"><em>æµ‹è¯•è¿™ä¸€å°èŠ‚çš„æ•°æ®/æ•°æ®éšå«çš„å…³ç³»éƒ½æ˜¯æˆ‘ YY çš„ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆ</em><br><em>å…³äº FFNN åœ¨è¿™é‡Œçš„ä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ä¹Ÿæ˜¯ YY çš„ï¼Œä¸å…·æœ‰æŒ‡å¯¼ä½œç”¨ï¼Œè¯·å¤§å®¶ä»…ä½œå‚è€ƒ</em></font></p>

<p>å‡è®¾ç°åœ¨æœ‰ä¸€å®¶å…¬å¸è¦è¦é’ˆå¯¹è‡ªå·±çš„ç§»åŠ¨ç«¯ç”¨æˆ·åšä¸€ä¸ª<strong>ç»“è¯†å¦¹å­</strong>çš„æ´»åŠ¨ï¼Œè¯¥æ´»åŠ¨åœ¨ç§»åŠ¨ç«¯çš„å…¥å£ä¸ºé¦–é¡µçš„æŸä¸ªå¯ç‚¹å‡»åŒºåŸŸï¼Œè¯¥å…¬å¸è¿è¥å¸Œæœ›è¿™ä¸ªæ´»åŠ¨èƒ½<strong>æ›´æœ‰é’ˆå¯¹æ€§çš„æ¨å¹¿</strong>ï¼Œä¹Ÿå°±æ˜¯ç­›é€‰å‡ºæ¥å¯èƒ½ä¼šå¯¹è¿™ä¸ªæ´»åŠ¨æ›´æ„Ÿå…´è¶£çš„ç”¨æˆ·ï¼Œåœ¨è¿™äº›ç”¨æˆ·ä½¿ç”¨ App æ—¶ï¼Œåœ¨ç§»åŠ¨åº”ç”¨é¦–é¡µå‘å…¶æ¨å¹¿æ´»åŠ¨</p>
<p>å‡è®¾ç°åœ¨æˆ‘ä»¬é€šè¿‡æŸäº›æ–¹å¼ï¼ˆå¦‚ç°åº¦å‘å¸ƒï¼‰å¾—åˆ°äº†ä¸€äº›ç”¨æˆ·æ•°æ®ï¼š</p>
<h4 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Item</span> </span>&#123;</div><div class="line">    <span class="comment">/// æ€§åˆ«</span></div><div class="line">    <span class="comment">/// 0 å¥³æ€§ 1 ç”·æ€§</span></div><div class="line">    <span class="keyword">let</span> male: <span class="type">Float</span></div><div class="line">    <span class="comment">/// å©šæ‹çŠ¶å†µ</span></div><div class="line">    <span class="comment">/// 0 éå•èº« 1 æœªçŸ¥ 2 å•èº«</span></div><div class="line">    <span class="keyword">let</span> single: <span class="type">Float</span></div><div class="line">    <span class="comment">/// å¹´é¾„</span></div><div class="line">    <span class="comment">/// 15 ~ 55</span></div><div class="line">    <span class="keyword">let</span> age: <span class="type">Float</span></div><div class="line">    <span class="comment">/// ç‚¹å‡»çƒ­åº¦/æ„Ÿå…´è¶£ç¨‹åº¦</span></div><div class="line">    <span class="comment">/// 0 ~ 1000</span></div><div class="line">    <span class="keyword">let</span> frequency: <span class="type">Float</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºæ•°æ®"><a href="#åˆ›å»ºæ•°æ®" class="headerlink" title="åˆ›å»ºæ•°æ®"></a>åˆ›å»ºæ•°æ®</h4><p>åœ¨è¿™é‡Œæˆ‘å‡è®¾ <code>frequency</code> å’Œ <code>age</code> æœä»<a href="https://zh.wikipedia.org/zh/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83" target="_blank" rel="external">æ­£æ€åˆ†å¸ƒ</a>çš„å…³ç³»ï¼ŒåŒæ—¶å’Œæ€§åˆ«äºå¹´é¾„æœ‰å…³</p>
<p><font color="#999999"><em>è¿™é‡Œä½¿ç”¨æ­£æ€åˆ†å¸ƒå¯èƒ½å¹¶ä¸æ˜¯å¤ªæ°å½“ï¼Œå› ä¸ºç”¨æˆ·å¯¹æ´»åŠ¨çš„å–œå¥½ç¨‹åº¦å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒé—®é¢˜</em></font></p>

<p>é€šä¿—ä¸€ç‚¹çš„è®²ï¼Œæˆ‘åˆ›å»ºçš„è¿™äº›æ•°æ®ä¸­ï¼Œå¯¹<strong>ç»“è¯†å¦¹å­</strong>æ´»åŠ¨æœ€æ„Ÿå…´è¶£çš„æ˜¯<strong>å¹´é¾„ä¸º 25 å²çš„ç”·æ€§å•èº«ç”¨æˆ·</strong>ï¼ˆitem.age = 25, item.single = 2, item.male = 1ï¼‰ï¼Œ25å²ä¹‹å‰ï¼Œå¯¹æ´»åŠ¨çš„å…´è¶£é€æ¸å‡é«˜ï¼Œ25å²ä¹‹åï¼Œå¯¹æ´»åŠ¨çš„å…´è¶£é€æ¸é™ä½ï¼Œè¿™ä¸ªå…³ç³»å¤§æ¦‚æœä»æŸä¸ªç±»ä¼¼æ­£æ€åˆ†å¸ƒçš„å…³ç³»ã€‚æ€§åˆ«ä¸ºå¥³çš„è¯ï¼Œå¯¹<strong>ç»“è¯†å¦¹å­</strong>æ´»åŠ¨çš„å…´è¶£ä¸ºç”·æ€§ç”¨æˆ·çš„ä¸€åŠï¼Œç¡®å®šéå•èº«çš„ç”¨æˆ·å¯¹æ´»åŠ¨å…´è¶£ä¸ºå•èº«ç”¨æˆ·çš„ 1/3ï¼Œå©šæ‹æƒ…å†µæœªçŸ¥å–ä¸­é—´å€¼ 2/3ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="type">CustomNormalDistribution</span> = <span class="type">NormalDistribution</span>(Î¼: <span class="number">0</span>, Ïƒ: <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataGenerator</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">generateItems</span>(<span class="title">count</span>:<span class="title">Int</span>) -&gt; [<span class="title">Item</span>] </span>&#123;</div><div class="line">        ...</div><div class="line">        frequency = <span class="type">CustomNormalDistribution</span>(age) * (male == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">0.5</span>) * (single == <span class="number">1</span> ? <span class="number">0.66</span> : (single == <span class="number">2</span> ? <span class="number">1</span> : <span class="number">0.33</span>))</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h4><p>è€Œæˆ‘ä»¬çš„ FFNN å°±æ˜¯è¦é€šè¿‡å¤§é‡çš„â€œå­¦ä¹ â€ï¼Œæ¥<strong>æ‹Ÿåˆ</strong>ä¸Šé¢æˆ‘å‡æƒ³çš„è¿™ä¸ªå‡½æ•°å…³ç³»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> ffnn = <span class="type">FFNN</span>(inputCount: <span class="number">3</span>, hiddenCount: <span class="number">5</span>, outputCount: <span class="number">1</span>)</div><div class="line"><span class="keyword">let</span> data = <span class="type">DataGenerator</span>.generateItems(<span class="number">10000</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> (index, item) <span class="keyword">in</span> data.<span class="built_in">enumerate</span>() &#123;</div><div class="line">    ffnn.update([item.male, item.single, item.age])</div><div class="line">    ffnn.backpropagate([item.frequency])</div><div class="line">    <span class="keyword">if</span> index % <span class="number">10</span> == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">let</span> testData = <span class="type">DataGenerator</span>.getPerson()</div><div class="line">        <span class="keyword">let</span> result = ffnn.update([testData.male, testData.single, testData.age])</div><div class="line">        <span class="keyword">let</span> answer = testData.frequency</div><div class="line">        <span class="built_in">print</span>(result[<span class="number">0</span>] - answer)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h4><p>FFNN è®­ç»ƒå¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸ª ffnn åº”ç”¨åœ¨å½“å‰çš„è¿™ä¸ª<strong>ç»“è¯†å¦¹å­</strong>çš„æ¨¡å‹ä¸Šäº†</p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥è®¤ä¸º ffnn å·²ç»èƒ½å‡†ç¡®çš„åˆ†æå‡ºæŸä¸ªç”¨æˆ·å¯¹è¿™ä¸ªæ´»åŠ¨çš„å…´è¶£ï¼Œå¹¶æ ¹æ®å…´è¶£çš„å¤šå°‘ï¼Œæ¥åŠ¨æ€æ”¹å˜é¦–é¡µæ•°æ®æ˜¯å¦å±•ç¤ºè¯¥æ´»åŠ¨çš„å…¥å£ï¼Œé¢ç§¯å¤šå¤§ï¼Œè®©é¦–é¡µå¯¸åœŸå¯¸é‡‘çš„ç©ºé—´åˆ›é€ æ›´å¤šçš„æµé‡</p>
<p><strong>å†æ¬¡é™„ä¸Š<a href="https://github.com/HaloWang/SwiftFFNN" target="_blank" rel="external">å®Œæ•´é¡¹ç›®é“¾æ¥</a></strong></p>
<h2 id="ä½¿ç”¨-TensorFlow"><a href="#ä½¿ç”¨-TensorFlow" class="headerlink" title="ä½¿ç”¨ TensorFlow"></a>ä½¿ç”¨ TensorFlow</h2><p></p><p><font color="#999999"><em>éœ€è¦ç§‘å­¦ä¸Šç½‘</em></font></p><p></p>
<p>å®é™…ä¸Šå…³äºç¥ç»ç½‘ç»œä¸šç•Œæˆç†Ÿçš„è½®å­å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œç›®å‰æ¯”è¾ƒç«çš„å°±æ˜¯ Google çš„ <a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="external">TensorFlow</a></p>
<p>å…³äºå¦‚ä½•ä½¿ç”¨åŸºäº TensorFlow çš„ FFNNï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹è¿™é‡Œï¼š<a href="https://www.tensorflow.org/versions/r0.9/tutorials/mnist/tf/index.html" target="_blank" rel="external">TensorFlow Mechanics 101</a>ï¼Œæˆ–è€…<a href="http://wiki.jikexueyuan.com/project/tensorflow-zh/" target="_blank" rel="external">ä¸­æ–‡ç‰ˆ</a></p>
<p>ä¸‹é¢æˆ‘å°±ä½¿ç”¨ Python å’Œ TensorFlow å¯¹ä¸Šé¢ä»£ç ç”Ÿæˆçš„ JSON å†åšä¸€éåˆ†æï¼š</p>
<font color="#999999"><em>åŸºäº Python 2.7.12ï¼ŒTensorFlow å·²æ­£ç¡®å®‰è£…</em></font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"><span class="comment"># å¯¼å…¥ json æ•°æ®</span></div><div class="line"><span class="comment"># è®­ç»ƒ</span></div></pre></td></tr></table></figure>
<p><a href="">Python.useTF æºç </a></p>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li><a href="http://stackoverflow.com/questions/2480650/role-of-bias-in-neural-networks" target="_blank" rel="external">stackoverflow: bias æœ‰ä»€ä¹ˆç”¨</a></li>
<li><a href="https://www.youtube.com/channel/UCiDouKcxRmAdc5OeZdiRwAg" target="_blank" rel="external">Youtube: DeepLearning.TV</a></li>
<li><a href="https://www.youtube.com/channel/UC9OeZkIwhzfv-_Cb7fCikLQ" target="_blank" rel="external">Youtube: Hugo Larochelle</a>æˆ‘ä»…ä»…çœ‹äº† 10 å¤šé›†ï¼Œä¸è¿‡å‰å‡ é›†ä»ç„¶è®©æˆ‘æ”¶è·è‰¯å¤š</li>
<li><a href="https://www.youtube.com/watch?v=h3l4qz76JhQ" target="_blank" rel="external">Youtube: Build a Neural Net in 4 Minutes</a>è§†é¢‘ä½œè€…æŠŠ numpy å†™æˆäº† npï¼Œå®åœ¨æ˜¯æœ‰ç‚¹å‘äº†ï¼Œä¸è¿‡ä»ç„¶è®©æˆ‘è§è¯†åˆ°äº† Python + Numpy ç»„åˆçš„å¼ºå¤§</li>
<li><a href="https://en.wikipedia.org/wiki/Geoffrey_Hinton" target="_blank" rel="external">Geoffrey Hinton</a> å’Œ<a href="https://en.wikipedia.org/wiki/Backpropagation" target="_blank" rel="external">backpropagation</a>æœ‰è¯´ä¸å°½çš„å…³ç³»</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«ä¸€ä¸‹æˆ‘è¿‘æœŸå­¦ä¹ åˆ°çš„ç¥ç»ç½‘ç»œç›¸å…³&lt;br&gt;åŒæ—¶ï¼Œä½¿ç”¨ Swift å®ç°ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œå¹¶äºˆä»¥æµ‹è¯•&lt;/p&gt;
&lt;h2 id=&quot;ç¥ç»ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#ç¥ç»ç½‘ç»œ&quot; class=&quot;headerlink&quot; title=&quot;ç¥ç»ç½‘ç»œ&quot;&gt;&lt;/a&gt;ç¥ç»ç½‘ç»œ&lt;/h2&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Halo.framework</title>
    <link href="http://yoursite.com/2016/03/09/introduction-of-Halo/"/>
    <id>http://yoursite.com/2016/03/09/introduction-of-Halo/</id>
    <published>2016-03-09T14:46:39.000Z</published>
    <updated>2016-04-09T14:43:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Halo æ˜¯æˆ‘ä½¿ç”¨ Swift å¼€å‘ iOS åº”ç”¨ä¸€å¹´ä¸‹æ¥æ‰€ç§¯ç´¯çš„ä¸€ä¸ªå·¥å…·åº“ï¼ˆå½“ç„¶ä¹Ÿä¼šæœ‰äº›ä»¥å‰ ObjC çš„â€œé—è€â€ï¼‰ï¼Œè¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä¼šç®€å•è¯´æ˜ä¸€ä¸‹è‡ªå·±æ˜¯å¦‚ä½•è®¾è®¡å¹¶ä½¿ç”¨ Halo çš„</p>
<p>Halo çš„åå­—å–è‡ªä¸€æ¬¾å«åš <a href="https://www.halowaypoint.com/en-us" target="_blank" rel="external">HALO</a> çš„æ¸¸æˆã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢è¿™æ¬¾æ¸¸æˆå®å¤§çš„èƒŒæ™¯ï¼Œæ‰€ä»¥å°±å«åšè¿™ä¸ªåå­—äº†</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>Halo ä½¿ç”¨ Swift ç¼–å†™ï¼Œä»…æ”¯æŒ iOS å¹³å°</li>
<li>å·²ä¸Šä¼ è‡³<a href="https://github.com/HaloWang/Halo" target="_blank" rel="external">Github</a>ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ç©ç©çœ‹ï¼ˆåœ¨ HaloDemo è¿™ä¸ª Target ä¸­ï¼‰~</li>
<li>æˆ‘ç°åœ¨ä½¿ç”¨ CocoaPods å°† Halo é›†æˆè¿›è‡ªå·±çš„é¡¹ç›®ï¼ˆPS: <code>pod search Halo</code>ï¼‰</li>
</ul>
<h3 id="é“¾å¼è¯­æ³•"><a href="#é“¾å¼è¯­æ³•" class="headerlink" title="é“¾å¼è¯­æ³•"></a>é“¾å¼è¯­æ³•</h3><p>Halo ä¸­å¾ˆå¤šæ–¹æ³•éƒ½æ˜¯ä¸ºäº†å®ç°é“¾å¼è¯­æ³•ï¼Œæˆ–è€…å¸¦æœ‰é“¾å¼è¯­æ³•çš„ç‰¹æ€§</p>
<p>éé“¾å¼è¯­æ³•ï¼š</p>
<pre><code>object.propertyA = valueA
object.propertyB = valueB
object.propertyC = valueC
object.propertyD = valueD
</code></pre><p>é“¾å¼è¯­æ³•ï¼š</p>
<pre><code>object
    .propertyA(valueA)
    .propertyB(valueB)
    .propertyC(valueC)
    .propertyD(valueD)
</code></pre><p>æ•ˆæœå›¾ï¼š</p>
<p><img src="/image_002/ChainableMethods.png" alt=""></p>
<p>æˆ‘è¿™æ ·ä½œçš„ä¸»è¦åŸå› æœ‰ï¼š</p>
<ul>
<li>ä¸å–œæ¬¢åœ¨è®¾ç½® object çš„è‹¥å¹²å±æ€§æ—¶æ¯æ¬¡éƒ½è¦å¤šå†™ä¸€ä¸ª object</li>
<li>å¯ä»¥åœ¨ map ç­‰å‡½æ•°ä¸­è®¾ç½®å±æ€§çš„åŒæ—¶è¿”å›ç»“æœ</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„åŸºæœ¬å®ç°ä¸ºï¼š</p>
<pre><code>extension Class {
    //    Chainable method of property
    func property(property: propertyType) -&gt; Self {
        self.property = property
        return self
    }
}
</code></pre><h2 id="Halo-è¯¦ç»†ä»‹ç»"><a href="#Halo-è¯¦ç»†ä»‹ç»" class="headerlink" title="Halo è¯¦ç»†ä»‹ç»"></a>Halo è¯¦ç»†ä»‹ç»</h2><p>Halo.framework å·¥ç¨‹ç›®å½•å¦‚ä¸‹å›¾ï¼š<br><img src="/image_002/proj.png" alt=""><br>æ¥ä¸‹æ¥çš„æ—¶é—´ï¼Œæˆ‘ä¼šä»‹ç»ä¸€ä¸‹ Source ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶å®ç°çš„ä¸»è¦åŠŸèƒ½</p>
<h3 id="Swift-Halo"><a href="#Swift-Halo" class="headerlink" title="Swift+Halo"></a>Swift+Halo</h3><h4 id="CGFloatable-swift"><a href="#CGFloatable-swift" class="headerlink" title="CGFloatable.swift"></a>CGFloatable.swift</h4><p>è¯¥æ–‡ä»¶æä¾›äº†ä¸€ä¸ª<code>CGFloatable</code>åè®®ï¼Œä¸»è¦æ˜¯è§‰å¾—åœ¨ Swift ç¼–è¯‘å™¨æ€»æ˜¯è®¤ä¸º â€œ1â€ æ˜¯<code>Int</code>å€¼ï¼Œå’Œ<code>CGFloat</code>æ•°æ®ä½¿ç”¨æ—¶æ€»ä¼šå‡ºå…ˆç¼–è¯‘é”™è¯¯ã€‚æ‰€ä»¥ä¸º<code>Int</code>ã€<code>Double</code>ã€<code>Float</code>å®ç°äº†<code>CGFloatable</code>åè®®ï¼Œé€šè¿‡ <code>.f</code> çš„å½¢å¼å¿«é€Ÿè½¬åŒ–ä¸º<code>CGFloat</code>ï¼ˆè€Œä¸æ˜¯éº»çƒ¦çš„ <code>CGFloat(X)</code>ï¼‰<br>åŒæ—¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä½¿ç”¨ç¡¬ç¼–ç å¯¹å±å¹•é€‚é…åšäº†ä¸€äº›å¤„ç†</p>
<h4 id="Print-Halo-swift"><a href="#Print-Halo-swift" class="headerlink" title="Print+Halo.swift"></a>Print+Halo.swift</h4><p>é€šè¿‡<code>ccRight</code>ã€<code>ccWarning</code>ã€<code>ccError</code>è¾“å‡ºè¡¨æƒ…ç¬¦å·æ–¹ä¾¿è°ƒè¯•<br>ä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºåƒè¿™æ ·çš„ä¸œè¥¿ï¼š<br><img src="/image_002/log.png" alt=""></p>
<h3 id="UIKit-Halo"><a href="#UIKit-Halo" class="headerlink" title="UIKit+Halo"></a>UIKit+Halo</h3><p>è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥ <code>extension</code> çš„å½¢å¼å¤§é‡çš„å®ç°äº† UIKit ä¸€äº›å¸¸ç”¨æ§ä»¶çš„é“¾å¼è¯­æ³•ï¼Œä»¥æ–¹ä¾¿æ—¥å¸¸å¼€å‘çš„ä½¿ç”¨</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è¾¹è¾¹è§’è§’çš„ä¸œè¥¿ï¼š</p>
<ul>
<li>UITableView/UICollectionView åˆ©ç”¨æ³›å‹å¿«é€Ÿæ³¨å†Œ/é‡ç”¨å•å…ƒæ ¼æ–¹æ³•</li>
<li>ä½¿ç”¨ Hex å€¼åˆå§‹åŒ– UIColor</li>
<li>UIImageé™æ€æ¨¡ç³Š</li>
<li>UIView æˆªå±</li>
<li>æ–‡æœ¬æ˜¾ç¤ºæ‰€éœ€é«˜åº¦è®¡ç®—</li>
<li>UIAlertController å°è£…<br>â€¦</li>
</ul>
<h3 id="KeyboardObserver"><a href="#KeyboardObserver" class="headerlink" title="KeyboardObserver"></a>KeyboardObserver</h3><p>å®ç°è¿™ä¸ªç±»ä¸»è¦æ˜¯åŸæ¥æ¯æ¬¡åœ¨ä¸åŒ <code>UIViewController</code> ä¸­å¤„ç†é”®ç›˜äº‹ä»¶ï¼Œå†™äº†å¾ˆå¤šé‡å¤ä»£ç ï¼Œè¢«æ¶å¿ƒåˆ°äº†(-_-!)</p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨ ViewController ç±»ä¸­ç›‘å¬é”®ç›˜é«˜åº¦ï¼Œåªéœ€è¦è®¾ç½®ï¼ˆæˆ‘é€šå¸¸åœ¨ viewDidLoad æ–¹æ³•ä¸­ï¼‰ï¼š</p>
<pre><code>KeyboardObserver.delegate = self
</code></pre><p>è®© ViewController å®ç°ç›¸å…³åè®®ï¼š</p>
<pre><code>// MARK: - KeyboardObserverDelegate
extension ViewController : KeyboardObserverDelegate {
    func keyboardWillChangeToHeight(height: CGFloat, duration: NSTimeInterval) {
        //    height å°±æ˜¯é”®ç›˜å³å°†æ”¹å˜åˆ°çš„é«˜åº¦
    }
}
</code></pre><p>å¦‚æœä½ è¿˜æƒ³ä½¿ç”¨ Halo å¯¹ <code>UIScrollView</code> çš„æ‹“å±•ï¼Œå†è°ƒç”¨ä¸€ä¸‹ <code>insetBottom()</code> å°±å¯ä»¥æ–¹ä¾¿å¿«æ·çš„å®ç°é”®ç›˜é«˜åº¦å˜åŒ–çš„å“åº”äº†~</p>
<pre><code>func keyboardWillChangeToHeight(height: CGFloat, duration: NSTimeInterval) 
    scrollView.insetBottom(height)
}
</code></pre><p>PSï¼šæ–¹ä¾¿å½’æ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ä¸ªç±»çš„æˆ‘å†™çš„æœ‰ç‚¹ä¹±ï¼Œæœ‰æœºä¼šä¸€å®šå¥½å¥½æ•´ç†ä¸€ä¸‹ï¼</p>
<h3 id="æ–¹åœ†ï¼ˆFangYuanï¼‰"><a href="#æ–¹åœ†ï¼ˆFangYuanï¼‰" class="headerlink" title="æ–¹åœ†ï¼ˆFangYuanï¼‰"></a>æ–¹åœ†ï¼ˆFangYuanï¼‰</h3><p>Update: ç°åœ¨æ–¹åœ†åœ¨<a href="https://github.com/HaloWang/FangYuan" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p>ä¸€å¥—å¾®å‹å¸ƒå±€åº“ï¼Œä½¿ç”¨ <code>UIView.frame</code> è¿›è¡Œå¸ƒå±€ï¼ŒåŠŸèƒ½ç®€å•ï¼Œä¸Šæ‰‹å¿«é€Ÿï¼</p>
<h4 id="æˆ‘æ˜¯è¿™æ ·æƒ³çš„"><a href="#æˆ‘æ˜¯è¿™æ ·æƒ³çš„" class="headerlink" title="æˆ‘æ˜¯è¿™æ ·æƒ³çš„"></a>æˆ‘æ˜¯è¿™æ ·æƒ³çš„</h4><ul>
<li>ä»»ä½•ä¸€ä¸ª <code>UIView</code> ï¼Œæˆ‘ä»¬çŸ¥é“å…¶åœ¨ X è½´ä¸Šçš„<code>å®½åº¦</code>ã€<code>&lt;å·¦è¾¹-çˆ¶è§†å›¾å·¦è¾¹&gt;è·ç¦»</code>ã€<code>&lt;å³è¾¹-çˆ¶è§†å›¾å³è¾¹&gt;è·ç¦»</code>ä¸­çš„ä»»æ„ä¸¤è€…ï¼Œå³å¯ç¡®å®š<code>UIView.frame.origin.x</code>å’Œ<code>UIView.frame.size.width</code></li>
<li>ä»»ä½•ä¸€ä¸ª <code>UIView</code> ï¼Œæˆ‘ä»¬çŸ¥é“å…¶åœ¨ Y è½´ä¸Šçš„<code>é«˜åº¦</code>ã€<code>&lt;ä¸Šè¾¹-çˆ¶è§†å›¾ä¸Šè¾¹&gt;è·ç¦»</code>ã€<code>&lt;ä¸‹è¾¹-ä¸‹è§†å›¾å³è¾¹&gt;è·ç¦»</code>ä¸­çš„ä»»æ„ä¸¤è€…ï¼Œå³å¯ç¡®å®š<code>UIView.frame.origin.y</code>å’Œ<code>UIView.frame.size.height</code></li>
<li>é€šè¿‡å‰ä¸¤æ­¥ï¼Œå³å¯ç¡®å®šè¯¥ <code>UIView</code> çš„ <code>frame</code> </li>
<li>äºˆä»¥å®ç°</li>
</ul>
<h4 id="ç®€å•å±•ç¤º"><a href="#ç®€å•å±•ç¤º" class="headerlink" title="ç®€å•å±•ç¤º"></a>ç®€å•å±•ç¤º</h4><p>å‡è®¾æˆ‘ä»¬æƒ³è¾¾åˆ°è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<pre><code>1ã€testView_A
    è·ç¦»é¡¶éƒ¨30ï¼Œè·ç¦»å³ä¾§30ï¼Œé«˜åº¦ä¸º100ï¼Œè·ç¦»å·¦ä¾§30
2ã€testView_B
    è·ç¦» testView_A çš„åº•éƒ¨ 25
    è·ç¦» superView å·¦ä¾§çš„è·ç¦»ç­‰äº testView_A è·ç¦» superView å·¦ä¾§çš„è·ç¦»
    è·ç¦» superView å³ä¾§çš„è·ç¦»ç­‰äº testView_A è·ç¦» superView å³ä¾§çš„è·ç¦» + 10
    è·ç¦» superView åº•éƒ¨çš„è·ç¦»ç­‰äº 30
</code></pre><p>æ•ˆæœå›¾ï¼š</p>
<p><img src="/image_002/FangYuanDemo.png" alt=""></p>
<h3 id="ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹å¸ƒå±€æ–¹å¼ï¼š"><a href="#ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹å¸ƒå±€æ–¹å¼ï¼š" class="headerlink" title="ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹å¸ƒå±€æ–¹å¼ï¼š"></a>ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹å¸ƒå±€æ–¹å¼ï¼š</h3><pre><code>class ViewController: UIViewController {

    let testView_A = UILabel()

    let testView_B = UILabel()

    override func viewDidLoad() {
        super.viewDidLoad()

        view.addSubview(testView_A)
        view.addSubview(testView_B)

        testView_A.text = &quot;testView_A&quot;
        testView_B.text = &quot;testView_B&quot;

        var frameA = CGRectZero
        frameA.origin.x = 30
        frameA.origin.y = 30
        frameA.size.width = UIScreen.mainScreen().bounds.size.width - frameA.origin.x - 30
        frameA.size.height = 100
        testView_A.frame = frameA

        var frameB = CGRectZero
        frameB.origin.x = testView_A.frame.origin.x
        frameB.origin.y = testView_A.frame.origin.y + testView_A.frame.size.height + 25
        frameB.size.width = UIScreen.mainScreen().bounds.size.width - testView_A.frame.origin.x - (testView_A.superview!.frame.size.width - (testView_A.frame.origin.x + testView_A.frame.size.width)) - 10
        frameB.size.height = UIScreen.mainScreen().bounds.size.height - frameB.origin.y - 30
        testView_B.frame = frameB


        testView_A.backgroundColor = UIColor.redColor()
        testView_B.backgroundColor = UIColor.blueColor()
    }
}
</code></pre><p>ä½¿ç”¨ FangYuanï¼š</p>
<pre><code>import UIKit
import Halo

class ViewController: UIViewController {

    let testView_A = UILabel()

    let testView_B = UILabel()

    override func viewDidLoad() {
        super.viewDidLoad()

        view.addSubview(testView_A)
        view.addSubview(testView_B)

        testView_A.text = &quot;testView_A&quot;
        testView_B.text = &quot;testView_B&quot;

        //    ------- ä¸»è¦å˜åŒ– -------

        testView_A
            .top(30)
            .right(30)
            .height(100)
            .left(30)

        testView_B
            .top(testView_A.chainBottom + 25)
            .left(testView_A.left)
            .right(testView_A.right + 10)
            .bottom(30)

        //    ---------------------

        testView_A.backgroundColor = UIColor.redColor()
        testView_B.backgroundColor = UIColor.blueColor()
    }
}
</code></pre><p>å¯ä»¥çœ‹åˆ° FangYuan èƒ½ç®€åŒ–å¾ˆå¤šä»£ç ï¼Œå°±ç®—æ˜¯å’Œ Masonry ç›¸æ¯”ï¼Œä¹Ÿèƒ½çœä¸‹ä¸å°‘ä»£ç ï¼ŒåŒæ—¶ä¹Ÿè¿˜èƒ½å®ç°åŒæ ·çš„æ•ˆæœ</p>
<h4 id="FangYuan-çš„ç¼ºç‚¹"><a href="#FangYuan-çš„ç¼ºç‚¹" class="headerlink" title="FangYuan çš„ç¼ºç‚¹"></a>FangYuan çš„ç¼ºç‚¹</h4><ul>
<li>éœ€è¦çŸ¥é“åœ¨<code>UIView.superView</code>å­˜åœ¨æ—¶æ‰æœ‰æ•ˆ</li>
<li>FangYuan çš„è¯¸å¤šæ–¹æ³•éœ€è¦åœ¨<code>layoutSubviews</code>æˆ–<code>viewWillLayoutSubviews</code>è°ƒç”¨æ‰èƒ½ä¿è¯éš<code>superView.frame</code>çš„å˜åŒ–è€Œå˜åŒ–ï¼Œæ¯”å¦‚ä¸Šè¿°ä»£ç çš„ViewControllerå¤–å¦‚æœåµŒå¥—åœ¨ä¸€ä¸ª NavigationControllerä¸­ï¼Œä¼šå‡ºç°è¿™ç§æƒ…å†µï¼ˆå› ä¸ºFangYuançš„æ–¹æ³•å†™åœ¨äº†<code>viewDidLoad</code>ä¸­ï¼‰ï¼š</li>
</ul>
<p><img src="/image_002/badDemo.png" alt=""></p>
<h4 id="FangYuan-çš„ä½¿ç”¨æƒ…å†µ"><a href="#FangYuan-çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="FangYuan çš„ä½¿ç”¨æƒ…å†µ"></a>FangYuan çš„ä½¿ç”¨æƒ…å†µ</h4><p>æˆ‘åœ¨æœ€è¿‘çš„ä¸€ä¸ª<a href="https://itunes.apple.com/cn/app/quan-min-mo-te-ti-gong-gao/id1086009210?mt=8" target="_blank" rel="external">é¡¹ç›®</a>ä¸­ï¼Œ<strong>ä»…ä»…</strong>ä½¿ç”¨äº† Halo.FangYuan å°±å®ç°äº†æ•´ä¸ªé¡¹ç›®çš„å¸ƒå±€ğŸ˜</p>
<h2 id="å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­é›†æˆ-Halo-framework"><a href="#å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­é›†æˆ-Halo-framework" class="headerlink" title="å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­é›†æˆ Halo.framework"></a>å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­é›†æˆ Halo.framework</h2><h3 id="CocoaPodsï¼ˆæ¨èï¼‰"><a href="#CocoaPodsï¼ˆæ¨èï¼‰" class="headerlink" title="CocoaPodsï¼ˆæ¨èï¼‰"></a>CocoaPodsï¼ˆæ¨èï¼‰</h3><p>ç›´æ¥ä½¿ç”¨ <code>pod &#39;Halo&#39;</code>ï¼Œä¸è¦å¿˜è®° <code>use_frameworks!</code>~</p>
<h3 id="Carthage"><a href="#Carthage" class="headerlink" title="Carthage"></a>Carthage</h3><p>1ã€ç›´æ¥åœ¨<a href="https://github.com/HaloWang/Halo" target="_blank" rel="external">Github</a>ä¸‹è½½ä¸‹æ¥æ•´ä¸ªé¡¹ç›®<br>2ã€æ‰“å¼€ç»ˆç«¯<br>3ã€cd [è§£å‹ç¼©åçš„å·¥ç¨‹ç›®å½•]<br>4ã€carthage build â€“no-skip-current<br>5ã€åœ¨å·¥ç¨‹ç›®å½•ä¸­ Carthage/Build/iOS/ ä¸­æ‰¾åˆ° Halo.framework<br>6ã€æ¥ä¸‹æ¥å°±æ˜¯å°† Halo.framework é›†æˆåˆ°ä½ çš„å·¥ç¨‹ä¸­äº†ï¼Œç›¸ä¿¡å¤§å®¶çœ‹åˆ°è¿™é‡Œï¼Œåº”è¯¥éƒ½è‚¯å®šä¼šçš„å§~</p>
<h4 id="ä½¿ç”¨-Carthage-ä¸Šçº¿åˆ°-AppStore-æ—¶çš„å‘"><a href="#ä½¿ç”¨-Carthage-ä¸Šçº¿åˆ°-AppStore-æ—¶çš„å‘" class="headerlink" title="ä½¿ç”¨ Carthage ä¸Šçº¿åˆ° AppStore æ—¶çš„å‘"></a>ä½¿ç”¨ Carthage ä¸Šçº¿åˆ° AppStore æ—¶çš„å‘</h4><p>ä½¿ç”¨ä¸Šè¿°æ–¹æ³•é›†æˆçš„ Halo.framework åœ¨ï¼ˆä¸”ä»…åœ¨ï¼‰ä¸Šä¼ è‡³ AppStore æ—¶ä¼šå‡ºé”™ï¼ŒåŸå› æ˜¯å°† Halo.framework ä¸­å¤šä½™çš„ Architectures æ‰“åŒ…è¿›äº†ç´¢è¦ä¸Šä¼ çš„åº”ç”¨ç¨‹åºåŒ…ä¸­ï¼Œè§£å†³æ–¹æ¡ˆå¤§å®¶å¯ä»¥å‚ç…§<a href="http://ikennd.ac/blog/2015/02/stripping-unwanted-architectures-from-dynamic-libraries-in-xcode/" target="_blank" rel="external">è¿™é‡Œ</a>æˆ–è€…<a href="http://stackoverflow.com/questions/35240330/errors-building-xcode-project-after-adding-in-run-script-fatal-error-lipo-inpu/35240555" target="_blank" rel="external">Stackoverflow</a></p>
<p>å›§ï¼Œè¿™ä¸ªåˆ†æ˜æ˜¯æˆ‘çš„é”…å•Šï¼Œæœ‰æ—¶é—´ä¸€å®šè§£å†³ï¼</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="ç°åœ¨"><a href="#ç°åœ¨" class="headerlink" title="ç°åœ¨"></a>ç°åœ¨</h3><p>æ€»å¾—æ¥è¯´ï¼ŒHalo.framework æ˜¯å¾ˆå¤šå°å·¥å…·çš„é›†åˆï¼Œæˆ‘æœ¬ç€å¿«æ·ã€é«˜æ•ˆã€ä»£ç ç¾è§‚ã€æ„ä¹‰æ˜æ™°çš„æƒ³æ³•å»è®¾è®¡å‘å…¶ä¸­ä¸æ–­æ•´åˆä»£ç ã€‚</p>
<p>å¹³æ—¶å†™é¡¹ç›®ï¼Œå†™Demoæ„Ÿè§‰æ ¹æœ¬ç¦»ä¸å¼€~ä¸è¿‡ï¼Œç›¸æ¯”äºç½‘ä¸ŠçŸ¥åçš„ç¬¬ä¸‰æ–¹åº“æ¥è¯´ï¼Œå°±ç¾¸å¼±å¾ˆå¤šäº†ğŸ˜“</p>
<h3 id="å°†æ¥"><a href="#å°†æ¥" class="headerlink" title="å°†æ¥"></a>å°†æ¥</h3><p>æœ€è¿‘è¯»äº†å–µç¥çš„<a href="https://onevcat.com/2016/01/create-framework/" target="_blank" rel="external">å¦‚ä½•æ‰“é€ ä¸€ä¸ªè®©äººæ„‰å¿«çš„æ¡†æ¶</a>ï¼Œæ„Ÿè§‰è‡ªå·±çš„ Halo å³ä¾¿ä»…ä»…æ˜¯ä¸ªäººä½¿ç”¨ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä½ è¿˜æ²¡æœ‰å¯¹ FangYuan è¿›è¡Œè¿‡æ€§èƒ½ä¼˜åŒ–å•Šï¼Ÿ</li>
<li>FangYuan ä¸€å®šè¦åœ¨<code>layoutSubviews</code>æˆ–<code>viewWillLayoutSubviews</code>æ‰èƒ½ä¿è¯ä½¿ç”¨FangYuançš„<code>UIView</code>çš„<code>superView</code>ä¸€å®šå­˜åœ¨å—ï¼Ÿæ‰èƒ½ä¿è¯ä»»ä½• frame å˜åŠ¨æ—¶ï¼Œçº¦æŸéƒ½èƒ½ç”Ÿæ•ˆå—ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥åˆ©ç”¨ runtime åšä¸€äº›äº‹æƒ…å‘¢ï¼Ÿ</li>
<li>ä¹¦å†™é“¾å¼è¯­æ³•æ—¶ï¼Œåœ¨ä»£ç è‡ªåŠ¨è¡¥é½æ–¹é¢ï¼Œæ€»æ˜¯è·Ÿ UIKit åŸæœ‰çš„å±æ€§ç›¸å†²çªï¼Œä¸ºäº†å¿«é€Ÿä¹¦å†™ï¼Œä¹Ÿä¸ºäº†é¿å…å’Œå…¶ä»–ç¬¬ä¸‰æ–¹åº“äº§ç”Ÿå¯èƒ½çš„å†²çªï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ·»åŠ å‰ç¼€ï¼Ÿ</li>
</ul>
<p>æœ‰æœºä¼šçš„è¯ï¼Œæˆ‘ä¸€å®šä¼šä¸æ–­ç§¯ç´¯ä¸‹å»çš„ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;Halo æ˜¯æˆ‘ä½¿ç”¨ Swift å¼€å‘ iOS åº”ç”¨ä¸€å¹´ä¸‹æ¥æ‰€ç§¯ç´¯çš„ä¸€ä¸ªå·¥å…·åº“ï¼ˆå½“ç„¶ä¹Ÿä¼šæœ‰äº›ä»¥å‰ ObjC çš„â€œé—è€â€ï¼‰ï¼Œè¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä¼šç®€å•è¯´
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>åœ¨ Swift ç¯å¢ƒä¸‹ä½¿ç”¨ JavaScriptCore å’Œæœ¬åœ°ä»£ç äº¤äº’</title>
    <link href="http://yoursite.com/2016/03/01/%E5%9C%A8%20Swift%20%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%BD%BF%E7%94%A8%20JavaScriptCore%20%E5%92%8C%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81%E4%BA%A4%E4%BA%92/"/>
    <id>http://yoursite.com/2016/03/01/åœ¨ Swift ç¯å¢ƒä¸‹ä½¿ç”¨ JavaScriptCore å’Œæœ¬åœ°ä»£ç äº¤äº’/</id>
    <published>2016-03-01T15:36:50.000Z</published>
    <updated>2016-04-08T12:21:30.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¼˜ç”±"><a href="#ç¼˜ç”±" class="headerlink" title="ç¼˜ç”±"></a>ç¼˜ç”±</h2><p>æœ€è¿‘è¢«é—®èµ·è¿™æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æŠŠè‡ªå·±çŸ¥é“çš„å†™å‡ºæ¥<br>åŒ…æ‹¬ Web ç«¯è°ƒç”¨ Native å’Œ Native è°ƒç”¨ Webï¼Œç®—æ˜¯è®°å½•ä¸€ä¸‹</p>
<p>æœ¬æ–‡ä½¿ç”¨ Xcode 7.3 + Swiftï¼Œæœ€ä½å…¼å®¹ iOS 8.0</p>
<p><a href="https://github.com/HaloWang/JavaScriptCoreDemo" target="_blank" rel="external">è¿™é‡Œ</a>æŸ¥çœ‹æºä»£ç )æ˜¯é¡¹ç›®çš„å®Œæ•´ä»£ç ï¼Œä¸‹è½½å®Œæˆåï¼Œè¯·æ‰§è¡Œ <code>pod install</code></p>
<h2 id="ç›®å½•æ–‡ä»¶ä»‹ç»"><a href="#ç›®å½•æ–‡ä»¶ä»‹ç»" class="headerlink" title="ç›®å½•æ–‡ä»¶ä»‹ç»"></a>ç›®å½•æ–‡ä»¶ä»‹ç»</h2><h3 id="ViewController-swift"><a href="#ViewController-swift" class="headerlink" title="ViewController.swift"></a>ViewController.swift</h3><p>ViewController.swift ä¸»è¦é…åˆ Main.storyboard ç»˜åˆ¶äº† UI å…ƒç´ <br>æ¥ä¸‹æ¥ç»å¤§éƒ¨åˆ†ä»£ç å·¥ä½œå°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¿›è¡Œ<br><code>viewDidLoad</code>æ–¹æ³•ä¸­ä¸»è¦æ˜¯è®© webView åŠ è½½ Bundle ä¸­çš„ html æ–‡ä»¶<br><img src="/image_001/viewController.png" alt=""></p>
<h3 id="JavaScriptCoreDemo-html"><a href="#JavaScriptCoreDemo-html" class="headerlink" title="JavaScriptCoreDemo.html"></a>JavaScriptCoreDemo.html</h3><p>è¿™ä¸ªæ–‡ä»¶ä¸»è¦ç”¨æ¥æ¨¡æ‹Ÿå®é™…ä½¿ç”¨æ—¶æˆ‘ä»¬ä¼šé‡åˆ°çš„ web é¡µé¢<br><img src="/image_001/webPage.png" alt=""></p>
<h2 id="Web-ç«¯è°ƒç”¨-iOS-ç«¯ä»£ç "><a href="#Web-ç«¯è°ƒç”¨-iOS-ç«¯ä»£ç " class="headerlink" title="Web ç«¯è°ƒç”¨ iOS ç«¯ä»£ç "></a>Web ç«¯è°ƒç”¨ iOS ç«¯ä»£ç </h2><p>æˆ‘å°†å…¶åˆ†ä¸ºäº†å¦‚ä¸‹æ­¥éª¤</p>
<h3 id="ä¸º-WebView-æ³¨å†Œä»£ç†ï¼Œå¹¶å®ç°ä»£ç†æ–¹æ³•"><a href="#ä¸º-WebView-æ³¨å†Œä»£ç†ï¼Œå¹¶å®ç°ä»£ç†æ–¹æ³•" class="headerlink" title="ä¸º WebView æ³¨å†Œä»£ç†ï¼Œå¹¶å®ç°ä»£ç†æ–¹æ³•"></a>ä¸º WebView æ³¨å†Œä»£ç†ï¼Œå¹¶å®ç°ä»£ç†æ–¹æ³•</h3><p><code>webView.delegate = self</code></p>
<pre><code>extension ViewController : UIWebViewDelegate {
    func webViewDidFinishLoad(webView: UIWebView) {
        //    Waiting
    }
}
</code></pre><h3 id="è·å–åˆ°å½“å‰-Web-é¡µé¢ä¸­çš„ä¸Šä¸‹æ–‡"><a href="#è·å–åˆ°å½“å‰-Web-é¡µé¢ä¸­çš„ä¸Šä¸‹æ–‡" class="headerlink" title="è·å–åˆ°å½“å‰ Web é¡µé¢ä¸­çš„ä¸Šä¸‹æ–‡"></a>è·å–åˆ°å½“å‰ Web é¡µé¢ä¸­çš„ä¸Šä¸‹æ–‡</h3><pre><code>func webViewDidFinishLoad(webView: UIWebView) {
    context = webView.valueForKeyPath(&quot;documentView.webView.mainFrame.javaScriptContext&quot;) as? JSContext
    //    Waiting
}
</code></pre><h3 id="æ³¨å†Œå›è°ƒ"><a href="#æ³¨å†Œå›è°ƒ" class="headerlink" title="æ³¨å†Œå›è°ƒ"></a>æ³¨å†Œå›è°ƒ</h3><pre><code>func webViewDidFinishLoad(webView: UIWebView) {

    context = webView.valueForKeyPath(&quot;documentView.webView.mainFrame.javaScriptContext&quot;) as? JSContext

    let callBack : @convention(block) (AnyObject?) -&gt; Void = { [weak self] (paramFromJS) -&gt; Void in
        //    Waiting
     }

    context?.setObject(unsafeBitCast(callBack, AnyObject.self), forKeyedSubscript: &quot;callNative&quot;)
}
</code></pre><h3 id="å±•ç¤º-Web-é¡µé¢ä¼ é€’è¿‡æ¥çš„çš„å‚æ•°"><a href="#å±•ç¤º-Web-é¡µé¢ä¼ é€’è¿‡æ¥çš„çš„å‚æ•°" class="headerlink" title="å±•ç¤º Web é¡µé¢ä¼ é€’è¿‡æ¥çš„çš„å‚æ•°"></a>å±•ç¤º Web é¡µé¢ä¼ é€’è¿‡æ¥çš„çš„å‚æ•°</h3><p>æœ€åæˆ‘ä»¬éœ€è¦é€šçŸ¥è‡ªå·±åŸç”Ÿä»£ç å·²ç»æ¥å—åˆ°äº† web ç«¯çš„è°ƒç”¨ï¼Œå¹¶ä¸”è¾“å‡ºä¸€ä¸‹ web é¡µé¢ä¼ é€’è¿‡æ¥äº†å‚æ•°</p>
<p>åœ¨ ViewController ç±»ä¸­ï¼Œå®ç° fromJS æ–¹æ³•ï¼š</p>
<pre><code>func fromJS(paramFromJS:AnyObject?) {

    Alert
        .showIn(self)
        .style(UIAlertControllerStyle.ActionSheet)
        .title(&quot;Call From JS&quot;)
        .message(&quot;æ£€æµ‹åˆ°äº†æ¥è‡ª JS çš„è°ƒç”¨ï¼&quot;)
        .addAction(&quot;æˆ‘çŸ¥é“äº†&quot;, style: .Cancel, handler: nil)

    guard let paramFromJS = paramFromJS else {
        return
    }

    print(&quot;param from JavaScript is:&quot;)
    print(paramFromJS)

}
</code></pre><p>å…¶ä¸­ Alert ç±»æ¥è‡ªäº Halo.frameworkï¼Œç”¨æ¥é€šçŸ¥è‡ªå·±åŸç”Ÿä»£ç å·²ç»æ¥å—åˆ°äº† web ç«¯çš„è°ƒç”¨ï¼Œå¯¹ UIAlertController åšäº†ç®€å•çš„å°è£…ï¼Œä¸å¿…å…³å¿ƒ</p>
<p>åœ¨ä¸Šä¸€æ­¥ä¸­çš„ <code>Waiting</code> æ³¨é‡Šå¤„è°ƒç”¨</p>
<pre><code>let callBack : @convention(block) (AnyObject?) -&gt; Void = { [weak self] (paramFromJS) -&gt; Void in
    self?.fromJS(paramFromJS)    
}
</code></pre><p> è¿™é‡Œçš„ self (ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ ViewController) ä¸­è¢«åŠ ä¸Šäº† weak ä¿®é¥°ç¬¦ï¼Œè¿™æ˜¯å› ä¸ºï¼š</p>
<pre><code>context?.setObject(unsafeBitCast(callBack, AnyObject.self), forKeyedSubscript: &quot;callNative&quot;)
</code></pre><p>context ä¼šå¼ºå¼•ç”¨è¿™ä¸ªå›è°ƒå—ï¼Œä¸ºäº†é¿å…å¼ºå¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å°† self åœ¨ block ä¸­å£°æ˜ä¸ºå¼±å¼•ç”¨</p>
<p>è‡³äº @convention(block) ï¼Œå¤§å®¶å¯ä»¥å‚çœ‹<a href="http://stackoverflow.com/questions/32776342/how-to-store-this-objectivec-block-inside-a-swift-variable" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p>PS: è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸Šé¢çš„ä»£ç å¤§å®¶æ˜¯ä¸æ˜¯æœ‰ç‚¹å®³æ€•ï¼Ÿä¼˜é›…çš„ Swift æ€ä¹ˆä¼šå‡ºç° <code>unsafeBitCast(callBack, AnyObject.self)</code> è¿™æ ·çš„ä»£ç ï¼å¤§å®¶å¯ä»¥çœ‹çœ‹ <a href="http://nshipster.cn/javascriptcore" target="_blank" rel="external">è¿™é‡Œ</a><br>æœŸå¾… iOS10 SDK ä¸­ Swift ç¯å¢ƒä¸‹ï¼ŒJSContext å¯ä»¥å®ç°ä¸‹æ ‡è®¿é—®</p>
<p>PS2: å¦å¤–ï¼Œæˆ‘åœ¨è¿™é‡Œå°† paramFromJS å£°æ˜ä¸ºäº† AnyObject? ç±»å‹ï¼ŒJavaScriptCore æ˜¯å¯ä»¥è‡ªåŠ¨å°† js ä¼ é€’çš„å‚æ•°åšè½¬æ¢çš„ï¼Œä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡</p>
<pre><code>print(paramFromJS!.dynamicType)
</code></pre><p>å¯ä»¥å‘ç° paramFromJS è¢«è½¬åŒ–ä¸ºäº†<code>__NSDictionaryM</code><br>å…³äº dynamicTypeï¼Œè¯·çœ‹<a href="http://swifter.tips/instance-type/" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p><strong>è¿è¡Œç¨‹åº</strong></p>
<p>æ­¤æ—¶æ§åˆ¶å°è¾“å‡ºï¼š</p>
<p><img src="/image_001/consolo.png" alt=""></p>
<p>æ¨¡æ‹Ÿå™¨ï¼š</p>
<p><img src="/image_001/callNative.gif" alt=""></p>
<h2 id="iOS-ç«¯è°ƒç”¨-Web-çš„-js-ä»£ç "><a href="#iOS-ç«¯è°ƒç”¨-Web-çš„-js-ä»£ç " class="headerlink" title="iOS ç«¯è°ƒç”¨ Web çš„ js ä»£ç "></a>iOS ç«¯è°ƒç”¨ Web çš„ js ä»£ç </h2><p>å¯ä»¥åˆ†ä¸ºä¸¤ç§æ–¹å¼</p>
<h3 id="è°ƒç”¨-Web-é¡µé¢ä¸­å·²ç»å®ç°å¥½çš„-JS"><a href="#è°ƒç”¨-Web-é¡µé¢ä¸­å·²ç»å®ç°å¥½çš„-JS" class="headerlink" title="è°ƒç”¨ Web é¡µé¢ä¸­å·²ç»å®ç°å¥½çš„ JS"></a>è°ƒç”¨ Web é¡µé¢ä¸­å·²ç»å®ç°å¥½çš„ JS</h3><p>æˆ‘ä»¬çš„ web é¡µé¢ä¸­åŒ…å«äº†ä¸€æ®µå·²ç»å†™å¥½çš„ JavaScript functionï¼š</p>
<pre><code>function fromNative(args) {
    document.getElementById(&quot;fromNativeParan&quot;).innerHTML = &quot;æ¥è‡ªåŸç”Ÿä»£ç çš„å‚æ•°ä¸º&quot; + args;
};
</code></pre><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ JavaScriptContext ç›´æ¥å¯¹å…¶è¿›è¡Œè°ƒç”¨ï¼š</p>
<p>åœ¨ ViewController ç±»ä¸­ï¼Œå®ç° callJS æ–¹æ³•ï¼š</p>
<pre><code>func callJS() {
    let params : [AnyObject]! = [&quot;Hello JS! \(arc4random() % 10)&quot;]
    context?.objectForKeyedSubscript(&quot;fromNative&quot;).callWithArguments(params)
}
</code></pre><p><em>arc4random() % 10 çš„ä½œç”¨æ˜¯ä¸ºäº†äº§ç”Ÿéšæœºå–ä»¥åŒºåˆ†å¤šæ¬¡ç‚¹å‡»</em></p>
<p>åœ¨ rightBarButtonClick ä¸­è°ƒç”¨ï¼š</p>
<pre><code>@IBAction func rightBarButtonClick(sender: UIBarButtonItem) {
    callJS()
}
</code></pre><p>web é¡µé¢äº§ç”Ÿäº†å¦‚ä¸‹å˜åŒ–ï¼š</p>
<p><img src="/image_001/callJS.gif" alt=""></p>
<h3 id="ç›´æ¥æ³¨å…¥ä¸€æ®µ-JS-ä»£ç "><a href="#ç›´æ¥æ³¨å…¥ä¸€æ®µ-JS-ä»£ç " class="headerlink" title="ç›´æ¥æ³¨å…¥ä¸€æ®µ JS ä»£ç "></a>ç›´æ¥æ³¨å…¥ä¸€æ®µ JS ä»£ç </h3><p>åœ¨ ViewController ç±»ä¸­ï¼Œå®ç° evaluateJS æ–¹æ³•ï¼š</p>
<pre><code>func evaluateJS() {
    context?.evaluateScript(&quot;alert(\&quot;ä½ è°ƒç”¨äº† JS\&quot;)&quot;)
}
</code></pre><p>åœ¨ rightBarButtonClick ä¸­è°ƒç”¨ï¼š</p>
<pre><code>@IBAction func rightBarButtonClick(sender: UIBarButtonItem) {
    evaluateJS()
}
</code></pre><p>æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="/image_001/callJS_2.gif" alt=""></p>
<p>PS: å®é™…ä¸Š evaluateJS è¿˜å¯ä»¥å°åŸä¸‹é¢è¿™ç§å½¢å¼ï¼š</p>
<pre><code>func evaluateJS() {
    context?.evaluateScript(&quot;fromNative(&apos; ä½ è¿è¡Œäº†ä¸€æ®µJS&apos;)&quot;)
}
</code></pre><p>è¿™æ—¶è¯¥æ–¹æ³•çš„ä½œç”¨å’Œ ViewController.callJS å°±ä¸€æ ·äº†</p>
<h2 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h2><p>æœ¬æ¥è¿˜æƒ³å†™ç‚¹ WKWebView çš„ä¸œè¥¿ï¼Œä½†é‰´äºè‡ªå·±ä»¥å‰çš„ä½¿ç”¨ç»å†ï¼Œè¿˜æ˜¯ç®—äº†â€¦<br>ç®€å•è¯´ä¸€ä¸‹ä½¿ç”¨ WKWebView é‡åˆ°çš„å‘å§ï¼š</p>
<ul>
<li>æ— æ³•é€šè¿‡ç‚¹å‡» web é¡µé¢è·³è½¬åˆ° AppStoreï¼Œ<a href="http://stackoverflow.com/questions/29056854/how-can-i-understand-if-uiapplication-is-going-to-open-link-in-safari-app" target="_blank" rel="external">è§£å†³æ–¹æ¡ˆ</a></li>
<li>åœ¨æ·˜å®é¡µé¢æ—¶æ— æ³•ç‚¹å‡» web é¡µé¢ä¸Šçš„æŒ‰é’®ï¼Œ<a href="http://stackoverflow.com/questions/31955880/wkwebview-not-opening-some-target-blank-links" target="_blank" rel="external">è§£å†³æ–¹æ¡ˆ</a></li>
<li>web é¡µé¢çš„ alert åœ¨ç§»åŠ¨ç«¯ä¸Šå¤±æ•ˆï¼Œ<a href="http://stackoverflow.com/questions/26898941/ios-wkwebview-not-showing-javascript-alert-dialog" target="_blank" rel="external">è§£å†³æ–¹æ¡ˆ</a></li>
</ul>
<p>æ¯ä¸ªéƒ½æ˜¯è¶…çº§ä¸¥é‡çš„ bug æœ‰æ²¡æœ‰ï¼<br>åœ¨äº§å“ç»ç†é¢å‰ç›´å†’å†·æ±—æœ‰æ²¡æœ‰ï¼</p>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li><a href="http://nshipster.cn/javascriptcore/" target="_blank" rel="external">NSHipster - JavaScriptCore</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç¼˜ç”±&quot;&gt;&lt;a href=&quot;#ç¼˜ç”±&quot; class=&quot;headerlink&quot; title=&quot;ç¼˜ç”±&quot;&gt;&lt;/a&gt;ç¼˜ç”±&lt;/h2&gt;&lt;p&gt;æœ€è¿‘è¢«é—®èµ·è¿™æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æŠŠè‡ªå·±çŸ¥é“çš„å†™å‡ºæ¥&lt;br&gt;åŒ…æ‹¬ Web ç«¯è°ƒç”¨ Native å’Œ Native è°ƒç”¨ Webï¼Œç®—æ˜¯è®°å½•ä¸€ä¸‹&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å†™ç‚¹ä»€ä¹ˆå¥½å‘¢ï¼Ÿ</title>
    <link href="http://yoursite.com/2016/03/01/first-article/"/>
    <id>http://yoursite.com/2016/03/01/first-article/</id>
    <published>2016-03-01T12:30:26.000Z</published>
    <updated>2016-03-01T15:32:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ­£å¼å¼€å¯äº†ä¸ªäººåšå®¢ğŸ˜</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘æƒ³å†™çš„ä¸œè¥¿</p>
<h3 id="Halo-framework"><a href="#Halo-framework" class="headerlink" title="Halo.framework"></a>Halo.framework</h3><p>ä½¿ç”¨ Swift å¼€å‘ iOS App ä»¥æ¥æ‰€æ€»ç»“çš„ä¸œè¥¿</p>
<h3 id="JS-å’Œ-iOS-åŸç”Ÿäº¤äº’çš„è‹¥å¹²ç§æ–¹æ³•"><a href="#JS-å’Œ-iOS-åŸç”Ÿäº¤äº’çš„è‹¥å¹²ç§æ–¹æ³•" class="headerlink" title="JS å’Œ iOS åŸç”Ÿäº¤äº’çš„è‹¥å¹²ç§æ–¹æ³•"></a>JS å’Œ iOS åŸç”Ÿäº¤äº’çš„è‹¥å¹²ç§æ–¹æ³•</h3><p>æœ€è¿‘è¢«é—®èµ·è¿™æ ·çš„é—®é¢˜</p>
<h3 id="ä½¿ç”¨-Instrument"><a href="#ä½¿ç”¨-Instrument" class="headerlink" title="ä½¿ç”¨ Instrument"></a>ä½¿ç”¨ Instrument</h3><p>æ›¾ç»ä½¿ç”¨è¿‡ï¼Œç°åœ¨æ¥æ€»ç»“ä¸€ä¸‹</p>
<p>æ•¬è¯·æœŸå¾…~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ­£å¼å¼€å¯äº†ä¸ªäººåšå®¢ğŸ˜&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æˆ‘æƒ³å†™çš„ä¸œè¥¿&lt;/p&gt;
&lt;h3 id=&quot;Halo-framework&quot;&gt;&lt;a href=&quot;#Halo-framework&quot; class=&quot;headerlink&quot; title=&quot;Halo.framework&quot;&gt;&lt;/a&gt;Halo.f
    
    </summary>
    
    
  </entry>
  
</feed>
